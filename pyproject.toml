[project]
name = "decent-bench"
version = "0.0.0"
requires-python = ">=3.13"
dependencies = []

[tool.tox]
envlist = ["dev", "mypy", "pytest", "ruff"]

[tool.tox.env.dev]
deps = [
  "mypy",
  "pytest",
  "ruff",
  "sphinx",
  "sphinx_rtd_theme",
]

[tool.tox.env.sphinx]
description = "Generate rst and html files using sphinx"
deps = ["sphinx", "sphinx_rtd_theme"]
allowlist_externals = ["make"]
commands = [
  ["sphinx-apidoc", "-o", "docs/source", "decent_bench", "--no-toc"],
  ["make", "-C", "docs", "clean"],
  ["make", "-C", "docs", "html"],
]

[tool.tox.env.mypy]
description = "Run mypy (static type checker)"
deps = ["mypy"]
commands = [["mypy", "decent_bench"]]

[tool.tox.env.pytest]
description = "Run pytest (test executor)"
deps = ["pytest"]
commands = [["pytest"]]

[tool.tox.env.ruff]
description = "Run ruff (format and style checker)"
deps = ["ruff"]
commands = [
  ["ruff", "check", "decent_bench"],
  ["ruff", "format", "decent_bench", "--check"]
]

[tool.pytest.ini_options]
addopts = "-q -W error"
testpaths = ["test"]

[tool.mypy]
strict = true

[tool.ruff]
lint.select = ["ALL"]
lint.ignore = [
  "COM812", # missing-trailing-comma (COM812) may cause conflicts when used with the formatter
  "CPY001", # Missing copyright notice at top of file
  "D100",   # Missing docstring in public module
  "D104",   # Missing docstring in public package
  "D107",   # Missing docstring in __init__
  "D203",   # incorrect-blank-line-before-class (D203) and no-blank-line-before-class (D211) are incompatible
  "D212",   # multi-line-summary-first-line (D212) and multi-line-summary-second-line (D213) are incompatible
  "TC002",  # typing-only-third-party-import, reduces rt overhead but slows down development and makes imports messy
]
preview = true
line-length = 120
